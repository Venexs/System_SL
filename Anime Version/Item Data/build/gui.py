
# This file was generated by the Tkinter Designer by Parth Jadhav
# https://github.com/ParthJadhav/Tkinter-Designer


from pathlib import Path

# from tkinter import *
# Explicit imports to satisfy Flake8
from tkinter import Tk, Canvas, Entry, Text, Button, PhotoImage
import subprocess
import csv
import json

subprocess.Popen(['python', 'sfx.py'])
OUTPUT_PATH = Path(__file__).parent
ASSETS_PATH = OUTPUT_PATH / Path(r"assets\frame0")


def relative_to_assets(path: str) -> Path:
    return ASSETS_PATH / Path(path)


window = Tk()

window.geometry("957x555")
window.configure(bg = "#FFFFFF")

window.attributes('-alpha',0.8)

with open('Files/Temp Files/Inventory temp.csv', 'r') as fout:
    fr=csv.reader(fout)
    for k in fr:
        name=k[0]

with open("Files/Inventory.json", 'r') as fson:
    data=json.load(fson)
    dat_keys=list(data.keys())

item_full_data={}

rank=data[name][0]["rank"]
cat=data[name][0]["cat"]
n_cat=cat
if cat.upper()=="FIRST GAUNTLET" or cat.upper()=="SECOND GAUNTLET":
    n_cat="GAUNTLET"
qty=data[name][0]["qty"]
desc=data[name][0]["desc"]
val=data[name][0]['Value']

item_full_data[name]=data[name]

def selling():
    with open("Files/status.json", 'r') as read_status_file:
        read_status_file_data=json.load(read_status_file)

    with open("Files/Inventory.json", 'r') as fin_inv_fson:
        fin_inv_data=json.load(fin_inv_fson)

        fin_qt=fin_inv_data[name][0]["qty"]
        fin_inv_data[name][0]["qty"]=fin_qt-1
        closing=False
        if fin_inv_data[name][0]["qty"]==0:
            del fin_inv_data[name]
            closing=True

    with open("Files/Inventory.json", 'w') as finaladdon_inv:
        json.dump(fin_inv_data, finaladdon_inv, indent=6)

    with open("Files/status.json", 'w') as write_status_file:
        read_status_file_data["status"][0]['coins']+=int(val)
        json.dump(read_status_file_data, write_status_file, indent=4)

    if closing==True:
        subprocess.Popen(['python', 'Anime Version/Inventory/build/gui.py'])

        window.quit()

    else:
        subprocess.Popen(['python', 'Anime Version/Item Data/build/gui.py'])

        window.quit()

def equip():
    if cat in ["HELM", "CHESTPLATE", "FIRST GAUNTLET", "SECOND GAUNTLET", "BOOTS", "COLLAR", "RING"]:
        with open('Files/Equipment.json', 'r') as finale_equip:
            finale_equip_data=json.load(finale_equip)
            finale_equip_data[cat]=item_full_data

        with open('Files/Equipment.json', 'w') as inject:
            json.dump(finale_equip_data, inject, indent=6)

        subprocess.Popen(['python', 'Anime Version/Equipment/build/gui.py'])

if type(data[name][0]["buff"]) is dict:
    try:
        buff_main=data[name][0]["buff"]
        rol=list(buff_main.keys())

        if rol[0]=="AGIbuff":
            buff_1_name="AGI"
        elif rol[0]=="STRbuff":
            buff_1_name="STR"
        elif rol[0]=="VITbuff":
            buff_1_name="VIT"
        elif rol[0]=="INTbuff":
            buff_1_name="INT"
        elif rol[0]=="PERbuff":
            buff_1_name="PER"
        elif rol[0]=="MANbuff":
            buff_1_name="MAN"

        buff_1="+"+str(data[name][0]["buff"][rol[0]])

        if rol[1]=="AGIbuff":
            buff_2_name="AGI"
        elif rol[1]=="STRbuff":
            buff_2_name="STR"
        elif rol[1]=="VITbuff":
            buff_2_name="VIT"
        elif rol[1]=="INTbuff":
            buff_2_name="INT"
        elif rol[1]=="PERbuff":
            buff_2_name="PER"
        elif rol[1]=="MANbuff":
            buff_2_name="MAN"

        buff_2="+"+str(data[name][0]["buff"][rol[1]])
    except:
        buff_2_name=''
        buff_2='-'
else:
    buff_1_name=''
    buff_2_name=''
    buff_1='-'
    buff_2='-'

if type(data[name][0]["debuff"]) is dict:
    try:
        debuff_main=data[name][0]["debuff"]
        rol_2=list(debuff_main.keys())

        if rol_2[0]=="AGIdebuff":
            debuff_1_name="AGI"
        elif rol_2[0]=="STRdebuff":
            debuff_1_name="STR"
        elif rol_2[0]=="VITdebuff":
            debuff_1_name="VIT"
        elif rol_2[0]=="INTdebuff":
            debuff_1_name="INT"
        elif rol_2[0]=="PERdebuff":
            debuff_1_name="PER"
        elif rol_2[0]=="MANdebuff":
            debuff_1_name="MAN"

        debuff_1="+"+str(data[name][0]["debuff"][rol_2[0]])

        if rol_2[1]=="AGIdebuff":
            debuff_2_name="AGI"
        elif rol_2[1]=="STRdebuff":
            debuff_2_name="STR"
        elif rol_2[1]=="VITdebuff":
            debuff_2_name="VIT"
        elif rol_2[1]=="INTdebuff":
            debuff_2_name="INT"
        elif rol_2[1]=="PERdebuff":
            debuff_2_name="PER"
        elif rol_2[1]=="MANdebuff":
            debuff_2_name="MAN"

        debuff_2="+"+str(data[name][0]["debuff"][rol_2[1]])
    except:
        debuff_2_name=''
        debuff_2='-'
else:
    debuff_1_name=''
    debuff_2_name=''
    debuff_1='-'
    debuff_2='-'

def return_inv():
    subprocess.Popen(['python', 'Anime Version/Inventory/build/gui.py'])
    window.quit()

canvas = Canvas(
    window,
    bg = "#FFFFFF",
    height = 555,
    width = 957,
    bd = 0,
    highlightthickness = 0,
    relief = "ridge"
)

canvas.place(x = 0, y = 0)
image_image_1 = PhotoImage(
    file=relative_to_assets("image_1.png"))
image_1 = canvas.create_image(
    478.0,
    277.0,
    image=image_image_1
)

image_image_2 = PhotoImage(
    file=relative_to_assets("image_2.png"))
image_2 = canvas.create_image(
    482.976318359375,
    283.0,
    image=image_image_2
)

# ! ITEM NAME

canvas.create_rectangle(
    346.0,
    111.0,
    758.0,
    147.0,
    fill="#303030",
    outline="")

canvas.create_text(
    350.0,
    112.0,
    anchor="nw",
    text="Item:",
    fill="#FFFFFF",
    font=("Montserrat", 24 * -1)
)

canvas.create_text(
    415.0,
    112.0,
    anchor="nw",
    text=name,
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 24 * -1)
)

# ! Acquisitions

canvas.create_text(
    346.0,
    175.0,
    anchor="nw",
    text="Acquisition Difficulty:",
    fill="#FFFFFF",
    font=("Montserrat Light", 14 * -1)
)

canvas.create_text(
    346.0,
    196.0,
    anchor="nw",
    text=f"{rank}",
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 15 * -1)
)

canvas.create_text(
    355.0,
    196.0,
    anchor="nw",
    text="-rank",
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 15 * -1)
)

# ! Description

canvas.create_text(
    204.0,
    400.0,
    anchor="nw",
    text=desc,
    fill="#FFFFFF",
    font=("Montserrat Light", 14 * -1)
)

# ! Buffs and Debuffs

canvas.create_text(
    287.0,
    272.0,
    anchor="nw",
    text="-BUFF: ",
    fill="#4CFF73",
    font=("Montserrat SemiBold", 15 * -1)
)

canvas.create_text(
    345.0,
    272.0,
    anchor="nw",
    text=f"-{buff_1_name} {buff_1}",
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 15 * -1)
)

canvas.create_text(
    345.0,
    294.0,
    anchor="nw",
    text=f"-{buff_2_name} {buff_2}",
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 15 * -1)
)

canvas.create_text(
    287.0,
    333.0,
    anchor="nw",
    text="-DEBUFF: ",
    fill="#FF4C4C",
    font=("Montserrat SemiBold", 15 * -1)
)

canvas.create_text(
    365.0,
    333.0,
    anchor="nw",
    text=f"-{debuff_1_name} {debuff_1}",
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 15 * -1)
)

canvas.create_text(
    365.0,
    353.0,
    anchor="nw",
    text=f"-{debuff_2_name} {debuff_2}",
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 15 * -1)
)

# ! Category

canvas.create_text(
    528.0,
    196.0,
    anchor="nw",
    text=n_cat,
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 15 * -1)
)

canvas.create_text(
    528.0,
    175.0,
    anchor="nw",
    text="Category:",
    fill="#FFFFFF",
    font=("Montserrat Light", 14 * -1)
)

# ! Value

canvas.create_text(
    637.0,
    197.0,
    anchor="nw",
    text=val,
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 15 * -1)
)

canvas.create_text(
    637.0,
    176.0,
    anchor="nw",
    text="Value:",
    fill="#FFFFFF",
    font=("Montserrat Light", 14 * -1)
)

# ! Quantity

canvas.create_text(
    710.0,
    197.0,
    anchor="nw",
    text=qty,
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 15 * -1)
)

canvas.create_text(
    710.0,
    176.0,
    anchor="nw",
    text="Quantity:",
    fill="#FFFFFF",
    font=("Montserrat Light", 14 * -1)
)

canvas.create_rectangle(
    149.0,
    99.0,
    279.0,
    229.0,
    fill="#2E2E2E",
    outline="")

if cat=='HELM':
    image_image_3 = PhotoImage(
        file=relative_to_assets("button_2.png"))
elif cat=='CHESTPLATE':
    image_image_3 = PhotoImage(
        file=relative_to_assets("button_1.png"))
elif cat=='GAUNTLET':
    image_image_3 = PhotoImage(
        file=relative_to_assets("button_4.png"))
elif cat=='BOOTS':
    image_image_3 = PhotoImage(
        file=relative_to_assets("button_3.png"))
elif cat=='COLLAR':
    image_image_3 = PhotoImage(
        file=relative_to_assets("button_11.png"))
elif cat=='RING':
    image_image_3 = PhotoImage(
        file=relative_to_assets("button_10.png"))
elif cat=='WEAPON':
    image_image_3 = PhotoImage(
        file=relative_to_assets("button_5.png"))
elif cat=='MONEY':
    image_image_3 = PhotoImage(
        file=relative_to_assets("button_6.png"))
elif cat=='PAPER':
    image_image_3 = PhotoImage(
        file=relative_to_assets("button_7.png"))
else:
    image_image_3 = PhotoImage(
        file=relative_to_assets("button_8.png"))
image_3 = canvas.create_image(
    214.0,
    164.0,
    image=image_image_3
)

button_image_1 = PhotoImage(
    file=relative_to_assets("Sell.png"))
button_1 = Button(
    image=button_image_1,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: selling(),
    relief="flat"
)
button_1.place(
    x=622.0,
    y=428.0,
    width=135.0,
    height=25.0
)

button_image_2 = PhotoImage(
    file=relative_to_assets("Equip.png"))
button_2 = Button(
    image=button_image_2,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: equip(),
    relief="flat"
)
button_2.place(
    x=774.0,
    y=428.0,
    width=76.0,
    height=25.0
)

button_image_3 = PhotoImage(
    file=relative_to_assets("Return.png"))
button_3 = Button(
    image=button_image_3,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: return_inv(),
    relief="flat"
)
button_3.place(
    x=819.0,
    y=64.0,
    width=40.0,
    height=40.0
)
window.resizable(False, False)
window.mainloop()
