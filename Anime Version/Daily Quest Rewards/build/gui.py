
# This file was generated by the Tkinter Designer by Parth Jadhav
# https://github.com/ParthJadhav/Tkinter-Designer


from pathlib import Path

# from tkinter import *
# Explicit imports to satisfy Flake8
from tkinter import Tk, Canvas, Entry, Text, Button, PhotoImage
from datetime import datetime, timedelta, date
import subprocess
import json
import csv

OUTPUT_PATH = Path(__file__).parent
ASSETS_PATH = OUTPUT_PATH / Path(r"assets\frame0")


def relative_to_assets(path: str) -> Path:
    return ASSETS_PATH / Path(path)

subprocess.Popen(['python', 'sfx.py'])

window = Tk()

window.geometry("555x669")
window.configure(bg = "#FFFFFF")
window.attributes('-alpha',0.8)

with open("Files/Status.json", 'r') as rank_check_file:
    rank_check_data=json.load(rank_check_file)
    lvl=rank_check_data["status"][0]['level']

    if lvl>=1 and lvl<=10:
        rank="E"
    elif lvl>=11 and lvl<=20:
        rank="D"
    elif lvl>=21 and lvl<=30:
        rank="C"
    elif lvl>=31 and lvl<=45:
        rank="B"
    elif lvl>=46 and lvl<=65:
        rank="A"
    elif lvl>=66 and lvl<=80:
        rank="S"
    elif lvl>=81 and lvl<=90:
        rank="SS"
    elif lvl>=91 and lvl<=100:
        rank="SSS"
    elif lvl>=101:
        rank="National"

with open("Files/Data/Rank_Rewards.json", 'r') as final_rank_check_file:
    final_rank_check_data=json.load(final_rank_check_file)
    rew_list=final_rank_check_data[rank]

    av_str=av_int=rew_list[0]
    xp_pl=rew_list[1]
    coins=rew_list[2]

today = date.today()
today_date_str = today.strftime("%Y-%m-%d")

with open("Files/Checks/Daily_time_check.csv", 'w', newline='') as Daily_date_check_file:
    fw=csv.writer(Daily_date_check_file)
    fw.writerow([today_date_str, "False"])

def get():
    with open("Files/Status.json", 'w') as status_import:
        rank_check_data["status"][0]['coins']+=coins
        rank_check_data["avail_eq"][0]['str_based']+=av_str
        rank_check_data["avail_eq"][0]['int_based']+=av_int
        json.dump(rank_check_data, status_import, indent=4)

    with open("Files/Checks/Daily_time_check.csv", 'w', newline='') as Daily_date_check_file:
        fw=csv.writer(Daily_date_check_file)
        fw.writerow([today_date_str, "True"])

    subprocess.Popen(['python', 'Anime Version/Status Tab/build/gui.py'])
    window.quit()

canvas = Canvas(
    window,
    bg = "#FFFFFF",
    height = 669,
    width = 555,
    bd = 0,
    highlightthickness = 0,
    relief = "ridge"
)

canvas.place(x = 0, y = 0)
image_image_1 = PhotoImage(
    file=relative_to_assets("image_1.png"))
image_1 = canvas.create_image(
    277.0,
    478.0,
    image=image_image_1
)

image_image_2 = PhotoImage(
    file=relative_to_assets("image_2.png"))
image_2 = canvas.create_image(
    287.0,
    364.0,
    image=image_image_2
)

image_image_3 = PhotoImage(
    file=relative_to_assets("image_3.png"))
image_3 = canvas.create_image(
    286.0,
    175.0,
    image=image_image_3
)

canvas.create_text(
    125.0,
    232.0,
    anchor="nw",
    text="Youâ€™ve got rewards! Congratulations",
    fill="#FFFFFF",
    font=("Montserrat Regular", 18 * -1)
)

canvas.create_rectangle(
    105.0,
    291.0,
    468.0,
    317.0,
    fill="#272727",
    outline="")

canvas.create_text(
    105.0,
    293.0,
    anchor="nw",
    text=f" 1. +{av_str} STR Based Points",
    fill="#FFFFFF",
    font=("Montserrat Regular", 18 * -1)
)

canvas.create_rectangle(
    105.0,
    333.0,
    468.0,
    359.0,
    fill="#272727",
    outline="")

canvas.create_text(
    105.0,
    335.0,
    anchor="nw",
    text=f" 2. +{av_int} INT Based Points",
    fill="#FFFFFF",
    font=("Montserrat Regular", 18 * -1)
)

canvas.create_rectangle(
    105.0,
    375.0,
    468.0,
    401.0,
    fill="#272727",
    outline="")

canvas.create_text(
    105.0,
    377.0,
    anchor="nw",
    text=f" 3. +{xp_pl} XP",
    fill="#FFFFFF",
    font=("Montserrat Regular", 18 * -1)
)

canvas.create_rectangle(
    105.0,
    417.0,
    468.0,
    443.0,
    fill="#272727",
    outline="")

canvas.create_text(
    105.0,
    419.0,
    anchor="nw",
    text=f" 4. {coins} Gold Coins",
    fill="#FFFFFF",
    font=("Montserrat Regular", 18 * -1)
)

canvas.create_text(
    184.0,
    522.0,
    anchor="nw",
    text="Accept these rewards?",
    fill="#FFFFFF",
    font=("Montserrat Regular", 18 * -1)
)

button_image_1 = PhotoImage(
    file=relative_to_assets("button_1.png"))
button_1 = Button(
    image=button_image_1,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: get(),
    relief="flat"
)
button_1.place(
    x=133.0,
    y=571.0,
    width=82.0,
    height=28.0
)

button_image_2 = PhotoImage(
    file=relative_to_assets("button_2.png"))
button_2 = Button(
    image=button_image_2,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: window.quit(),
    relief="flat"
)
button_2.place(
    x=358.0,
    y=571.0,
    width=82.0,
    height=28.0
)
window.resizable(False, False)
window.mainloop()
