
# This file was generated by the Tkinter Designer by Parth Jadhav
# https://github.com/ParthJadhav/Tkinter-Designer


from pathlib import Path

# from tkinter import *
# Explicit imports to satisfy Flake8
from tkinter import Tk, Canvas, Entry, Text, Button, PhotoImage
import json
import csv
import subprocess
import random

subprocess.Popen(['python', 'sfx.py'])

OUTPUT_PATH = Path(__file__).parent
ASSETS_PATH = OUTPUT_PATH / Path(r"assets\frame0")


def relative_to_assets(path: str) -> Path:
    return ASSETS_PATH / Path(path)


window = Tk()

window.geometry("391x676")
window.configure(bg = "#FFFFFF")
window.attributes('-alpha',0.8)

def three_val(val):
    values=f"{val:03d}:"
    new_value=''
    for k in values:
        if k!=':':
            new_value+=k
    return new_value

def sign(num):
    if num<0:
        return "-"
    elif num>0:
        return "+"
    elif num==0:
        return ""

def pos_fix(num):
    if num<0:
        num=abs(num)
        return str(num)
    elif num==0:
        return ""
    else:
        return str(num)

canvas = Canvas(
    window,
    bg = "#FFFFFF",
    height = 676,
    width = 391,
    bd = 0,
    highlightthickness = 0,
    relief = "ridge"
)

canvas.place(x = 0, y = 0)
image_image_1 = PhotoImage(
    file=relative_to_assets("image_1.png"))
image_1 = canvas.create_image(
    478.0,
    340.0,
    image=image_image_1
)

image_image_2 = PhotoImage(
    file=relative_to_assets("image_2.png"))
image_2 = canvas.create_image(
    196.0,
    362.0,
    image=image_image_2
)

image_image_3 = PhotoImage(
    file=relative_to_assets("image_3.png"))
image_3 = canvas.create_image(
    109.0,
    112.0,
    image=image_image_3
)

image_image_4 = PhotoImage(
    file=relative_to_assets("image_4.png"))
image_4 = canvas.create_image(
    191.0,
    455.0,
    image=image_image_4
)

image_image_5 = PhotoImage(
    file=relative_to_assets("image_5.png"))
image_5 = canvas.create_image(
    191.0,
    328.0,
    image=image_image_5
)

# ? =====================================================================
# ? =====================================================================

with open("Files/status.json", 'r') as fson:
    data=json.load(fson)
    name=data["status"][0]['name'].upper()
    # ? =================================================
    hp=data["status"][0]['hp']
    mp=data["status"][0]['mp']
    lvl=data["status"][0]['level']
    old_lvl=f"{lvl:02d}"
    # ? =================================================
    stre=data["status"][0]['str']
    stre=three_val(stre)

    intel=data["status"][0]['int']
    intel=three_val(intel)

    agi=data["status"][0]['agi']
    agi=three_val(agi)

    vit=data["status"][0]['vit']
    vit=three_val(vit)

    per=data["status"][0]['per']
    per=three_val(per)

    man=data["status"][0]['man']
    man=three_val(man)
    # ? =================================================
    tit=data["status"][1]['title'].upper()
    job=data["status"][1]['job'].upper()
    # ? =================================================
    xp_str=data["status"][0]['XP']
    coins=data["status"][0]['coins']
    # ? =================================================
    av_str_based=data["avail_eq"][0]['str_based']
    av_str_based=three_val(av_str_based)
    av_int_based=data["avail_eq"][0]['int_based']
    av_int_based=three_val(av_int_based)
    # ? =================================================
    str_buff=data["equipment"][0]["STR"]
    str_buff=sign(str_buff)+pos_fix(str_buff)

    agi_buff=data["equipment"][0]["AGI"]
    agi_buff=sign(agi_buff)+pos_fix(agi_buff)

    vit_buff=data["equipment"][0]["VIT"]
    vit_buff=sign(vit_buff)+pos_fix(vit_buff)

    int_buff=data["equipment"][0]["INT"]
    int_buff=sign(int_buff)+pos_fix(int_buff)

    per_buff=data["equipment"][0]["PER"]
    per_buff=sign(per_buff)+pos_fix(per_buff)

    man_buff=data["equipment"][0]["MAN"]
    man_buff=sign(man_buff)+pos_fix(man_buff)
    # ? =================================================

# ? =====================================================================
# ? =====================================================================

if lvl!=0:
    fin_chk=False
    with open("Files/Data/Level_Up_Values.json", 'r') as fron2:
        data_2=json.load(fron2)
        xp_chl=data_2["XP Check"][str(lvl+1)]
        if xp_str>=xp_chl:
            fin_chk=True

    if fin_chk==True:
        data["status"][0]['level']+=1
        with open("Files/status.json", 'w') as up_fson:
            json.dump(data, up_fson, indent=4)
        subprocess.Popen(['python', 'Anime Version/Leveled up NO ADD/build/gui.py'])
        subprocess.Popen(['python', 'Anime Version/Status Tab/build/gui.py'])
        window.quit()

with open("Files/Data/Level_Up_Values.json", 'r') as fron:
    data_1=json.load(fron)
    xp_end=data_1["XP Check"][str(lvl)]

    fin_xp=xp_end-xp_str

# ? =====================================================================
# ? =====================================================================

# / =================================================
# / =================================================

def update_str():
    if int(av_str_based)!=0:
        with open("Files\Checks\Ability_Check.json", 'r') as ability_check_file:
            ability_check_file_data=json.load(ability_check_file)
            val=ability_check_file_data["Check"]["STR"]
        if val<3:
            global str_txt
            current_text = canvas.itemcget(str_txt, "text")
            # ? ====================================================
            current_number = int(current_text)
            new_number = current_number + 1
            # ? ====================================================
            with open("Files/status.json", 'w') as fson:
                data["status"][0]['str']+=1
                data["avail_eq"][0]['str_based']-=1
                json.dump(data, fson, indent=4)
            # ? ====================================================
            new_text = f"{new_number:03d}"
            canvas.itemconfig(str_txt, text=new_text)
            with open("Files\Checks\Ability_Check.json", 'w') as fin_ability_check_file:
                ability_check_file_data["Check"]["STR"]+=1
                json.dump(ability_check_file_data, fin_ability_check_file, indent=4)
            de_update_str()
        else:
            with open("Files/Temp Files/Urgent Temp.csv", 'w', newline='') as urgent_file:
                fr=csv.writer(urgent_file)
                fr.writerow(["STR"])
            subprocess.Popen(['python', 'Anime Version/Urgent Quest/build/gui.py'])
            window.quit()

def update_agi():
    if int(av_str_based)!=0:
        with open("Files\Checks\Ability_Check.json", 'r') as ability_check_file:
            ability_check_file_data=json.load(ability_check_file)
            val=ability_check_file_data["Check"]["AGI"]
        if val<3:
            global agi_txt
            current_text = canvas.itemcget(agi_txt, "text")
            # ? ====================================================
            current_number = int(current_text)
            new_number = current_number + 1
            # ? ====================================================
            with open("Files/status.json", 'w') as fson:
                data["status"][0]['agi']+=1
                data["avail_eq"][0]['str_based']-=1
                json.dump(data, fson, indent=4)
            # ? ====================================================
            new_text = f"{new_number:03d}"
            canvas.itemconfig(agi_txt, text=new_text)
            with open("Files\Checks\Ability_Check.json", 'w') as fin_ability_check_file:
                ability_check_file_data["Check"]["AGI"]+=1
                json.dump(ability_check_file_data, fin_ability_check_file, indent=4)
            de_update_str()
        else:
            with open("Files/Temp Files/Urgent Temp.csv", 'w', newline='') as urgent_file:
                fr=csv.writer(urgent_file)
                fr.writerow(["AGI"])
            subprocess.Popen(['python', 'Anime Version/Urgent Quest/build/gui.py'])
            window.quit()

def update_vit():
    if int(av_str_based)!=0:
        with open("Files\Checks\Ability_Check.json", 'r') as ability_check_file:
            ability_check_file_data=json.load(ability_check_file)
            val=ability_check_file_data["Check"]["VIT"]
        if val<3:
            global vit_txt
            current_text = canvas.itemcget(vit_txt, "text")
            # ? ====================================================
            current_number = int(current_text)
            new_number = current_number + 1
            # ? ====================================================
            with open("Files/status.json", 'w') as fson:
                data["status"][0]['vit']+=1
                data["avail_eq"][0]['str_based']-=1
                json.dump(data, fson, indent=4)
            # ? ====================================================
            new_text = f"{new_number:03d}"
            canvas.itemconfig(vit_txt, text=new_text)
            with open("Files\Checks\Ability_Check.json", 'w') as fin_ability_check_file:
                ability_check_file_data["Check"]["VIT"]+=1
                json.dump(ability_check_file_data, fin_ability_check_file, indent=4)
            de_update_str()
        else:
            with open("Files/Temp Files/Urgent Temp.csv", 'w', newline='') as urgent_file:
                fr=csv.writer(urgent_file)
                fr.writerow(["VIT"])
            subprocess.Popen(['python', 'Anime Version/Urgent Quest/build/gui.py'])
            window.quit()

def update_int():
    if int(av_int_based)!=0:
        with open("Files\Checks\Ability_Check.json", 'r') as ability_check_file:
            ability_check_file_data=json.load(ability_check_file)
            val=ability_check_file_data["Check"]["INT"]
        if val<3:
            global int_txt
            current_text = canvas.itemcget(int_txt, "text")
            # ? ====================================================
            current_number = int(current_text)
            new_number = current_number + 1
            # ? ====================================================
            with open("Files/status.json", 'w') as fson:
                data["status"][0]['int']+=1
                data["avail_eq"][0]['int_based']-=1
                json.dump(data, fson, indent=4)
            # ? ====================================================
            new_text = f"{new_number:03d}"
            canvas.itemconfig(int_txt, text=new_text)
            with open("Files\Checks\Ability_Check.json", 'w') as fin_ability_check_file:
                ability_check_file_data["Check"]["INT"]+=1
                json.dump(ability_check_file_data, fin_ability_check_file, indent=4)
            de_update_int()
        else:
            with open("Files/Temp Files/Urgent Temp.csv", 'w', newline='') as urgent_file:
                fr=csv.writer(urgent_file)
                fr.writerow(["INT"])
            subprocess.Popen(['python', 'Anime Version/Urgent Quest/build/gui.py'])
            window.quit()

def update_per():
    if int(av_int_based)!=0:
        with open("Files\Checks\Ability_Check.json", 'r') as ability_check_file:
            ability_check_file_data=json.load(ability_check_file)
            val=ability_check_file_data["Check"]["PER"]
        if val<3:
            global per_txt
            current_text = canvas.itemcget(per_txt, "text")
            # ? ====================================================
            current_number = int(current_text)
            new_number = current_number + 1 
            # ? ====================================================
            with open("Files/status.json", 'w') as fson:
                data["status"][0]['per']+=1
                data["avail_eq"][0]['int_based']-=1
                json.dump(data, fson, indent=4)
            # ? ====================================================
            new_text = f"{new_number:03d}"
            canvas.itemconfig(per_txt, text=new_text)
            with open("Files\Checks\Ability_Check.json", 'w') as fin_ability_check_file:
                ability_check_file_data["Check"]["PER"]+=1
                json.dump(ability_check_file_data, fin_ability_check_file, indent=4)
            de_update_int()
        else:
            with open("Files/Temp Files/Urgent Temp.csv", 'w', newline='') as urgent_file:
                fr=csv.writer(urgent_file)
                fr.writerow(["PER"])
            subprocess.Popen(['python', 'Anime Version/Urgent Quest/build/gui.py'])
            window.quit()

def update_man():
    if int(av_int_based)!=0:
        with open("Files\Checks\Ability_Check.json", 'r') as ability_check_file:
            ability_check_file_data=json.load(ability_check_file)
            val=ability_check_file_data["Check"]["MAN"]
        if val<3:
            global man_txt
            current_text = canvas.itemcget(man_txt, "text")
            # ? ====================================================
            current_number = int(current_text)
            new_number = current_number + 1
            # ? ====================================================
            with open("Files/status.json", 'w') as fson:
                data["status"][0]['man']+=1
                data["avail_eq"][0]['int_based']-=1
                json.dump(data, fson, indent=4)
            # ? ====================================================
            new_text = f"{new_number:03d}"
            canvas.itemconfig(man_txt, text=new_text)
            with open("Files\Checks\Ability_Check.json", 'w') as fin_ability_check_file:
                ability_check_file_data["Check"]["MAN"]+=1
                json.dump(ability_check_file_data, fin_ability_check_file, indent=4)
            de_update_int()
        else:
            with open("Files/Temp Files/Urgent Temp.csv", 'w', newline='') as urgent_file:
                fr=csv.writer(urgent_file)
                fr.writerow(["MAN"])
            subprocess.Popen(['python', 'Anime Version/Urgent Quest/build/gui.py'])
            window.quit()

# / =================================================
# / =================================================

def de_update_str():
    global av_str_based_txt
    current_text = canvas.itemcget(av_str_based_txt, "text")
    current_number = int(current_text)
    new_number = current_number - 1
    new_text = f"{new_number:03d}"
    canvas.itemconfig(av_str_based_txt, text=new_text)

def de_update_int():
    global av_int_based_txt
    current_text = canvas.itemcget(av_int_based_txt, "text")
    current_number = int(current_text)
    new_number = current_number - 1
    new_text = f"{new_number:03d}"
    canvas.itemconfig(av_int_based_txt, text=new_text)

# / =================================================
# / =================================================

str_txt=canvas.create_text(
    63.0,
    388.0,
    anchor="nw",
    text=stre,
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 20 * -1)
)

canvas.create_text(
    106.0,
    391.0,
    anchor="nw",
    text=f"({str_buff})",
    fill="#34FF48",
    font=("Montserrat Regular", 15 * -1)
)

int_txt=canvas.create_text(
    61.0,
    442.0,
    anchor="nw",
    text=intel,
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 20 * -1)
)

canvas.create_text(
    104.0,
    445.0,
    anchor="nw",
    text=f"({int_buff})",
    fill="#34FF48",
    font=("Montserrat Regular", 15 * -1)
)

agi_txt=canvas.create_text(
    61.0,
    494.0,
    anchor="nw",
    text=agi,
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 20 * -1)
)

canvas.create_text(
    104.0,
    497.0,
    anchor="nw",
    text=f"({agi_buff})",
    fill="#34FF48",
    font=("Montserrat Regular", 15 * -1)
)

vit_txt=canvas.create_text(
    241.0,
    388.0,
    anchor="nw",
    text=vit,
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 20 * -1)
)

canvas.create_text(
    286.0,
    391.0,
    anchor="nw",
    text=f"({vit_buff})",
    fill="#34FF48",
    font=("Montserrat Regular", 15 * -1)
)

per_txt=canvas.create_text(
    248.0,
    440.0,
    anchor="nw",
    text=per,
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 20 * -1)
)

canvas.create_text(
    289.0,
    443.0,
    anchor="nw",
    text=f"({per_buff})",
    fill="#34FF48",
    font=("Montserrat Regular", 15 * -1)
)

man_txt=canvas.create_text(
    254.0,
    496.0,
    anchor="nw",
    text=man,
    fill="#FFFFFF",
    font=("Montserrat SemiBold", 20 * -1)
)

canvas.create_text(
    296.0,
    498.0,
    anchor="nw",
    text=f"({man_buff})",
    fill="#34FF48",
    font=("Montserrat Regular", 15 * -1)
)


image_image_8 = PhotoImage(
    file=relative_to_assets("image_8.png"))
image_8 = canvas.create_image(
    45.0,
    402.0,
    image=image_image_8
)

image_image_9 = PhotoImage(
    file=relative_to_assets("image_9.png"))
image_9 = canvas.create_image(
    43.0,
    456.0,
    image=image_image_9
)

image_image_10 = PhotoImage(
    file=relative_to_assets("image_10.png"))
image_10 = canvas.create_image(
    44.0,
    508.0,
    image=image_image_10
)

image_image_11 = PhotoImage(
    file=relative_to_assets("image_11.png"))
image_11 = canvas.create_image(
    225.0,
    402.0,
    image=image_image_11
)

image_image_12 = PhotoImage(
    file=relative_to_assets("image_12.png"))
image_12 = canvas.create_image(
    229.0,
    454.0,
    image=image_image_12
)

image_image_13 = PhotoImage(
    file=relative_to_assets("image_13.png"))
image_13 = canvas.create_image(
    232.0,
    510.0,
    image=image_image_13
)

button_image_1 = PhotoImage(
    file=relative_to_assets("button_1.png"))
button_1 = Button(
    image=button_image_1,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: update_str(),
    relief="flat"
)
button_1.place(
    x=147.0,
    y=393.0,
    width=20.954654693603516,
    height=20.0
)

button_image_2 = PhotoImage(
    file=relative_to_assets("button_2.png"))
button_2 = Button(
    image=button_image_2,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: update_int(),
    relief="flat"
)
button_2.place(
    x=148.0,
    y=447.0,
    width=20.954654693603516,
    height=20.0
)

button_image_3 = PhotoImage(
    file=relative_to_assets("button_3.png"))
button_3 = Button(
    image=button_image_3,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: update_agi(),
    relief="flat"
)
button_3.place(
    x=148.0,
    y=499.0,
    width=20.954654693603516,
    height=20.0
)

button_image_4 = PhotoImage(
    file=relative_to_assets("button_4.png"))
button_4 = Button(
    image=button_image_4,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: update_vit(),
    relief="flat"
)
button_4.place(
    x=323.0,
    y=390.0,
    width=20.954654693603516,
    height=20.0
)

button_image_5 = PhotoImage(
    file=relative_to_assets("button_5.png"))
button_5 = Button(
    image=button_image_5,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: update_per(),
    relief="flat"
)
button_5.place(
    x=329.0,
    y=442.0,
    width=20.954654693603516,
    height=20.0
)

button_image_6 = PhotoImage(
    file=relative_to_assets("button_6.png"))
button_6 = Button(
    image=button_image_6,
    borderwidth=0,
    highlightthickness=0,
    command=lambda: update_man(),
    relief="flat"
)
button_6.place(
    x=336.0,
    y=498.0,
    width=20.954654693603516,
    height=20.0
)

image_image_14 = PhotoImage(
    file=relative_to_assets("image_14.png"))
image_14 = canvas.create_image(
    53.0,
    310.0,
    image=image_image_14
)

canvas.create_text(
    72.0,
    298.0,
    anchor="nw",
    text=hp,
    fill="#FFFFFF",
    font=("Montserrat Medium", 18 * -1)
)

image_image_15 = PhotoImage(
    file=relative_to_assets("image_15.png"))
image_15 = canvas.create_image(
    279.0,
    310.0,
    image=image_image_15
)

canvas.create_text(
    293.0,
    297.0,
    anchor="nw",
    text=mp,
    fill="#FFFFFF",
    font=("Montserrat Medium", 18 * -1)
)

image_image_16 = PhotoImage(
    file=relative_to_assets("image_16.png"))
image_16 = canvas.create_image(
    138.0,
    338.0,
    image=image_image_16
)

canvas.create_text(
    239.0,
    324.0,
    anchor="nw",
    text=fin_xp,
    fill="#FFFFFF",
    font=("Montserrat Medium", 16 * -1)
)

canvas.create_text(
    281.0,
    220.0,
    anchor="nw",
    text="LEVEL",
    fill="#FFFFFF",
    font=("Montserrat Regular", 24 * -1)
)

canvas.create_text(
    280.0,
    155.0,
    anchor="nw",
    text=old_lvl,
    fill="#FFFFFF",
    font=("Montserrat Bold", 60 * -1)
)

canvas.create_text(
    14.0,
    194.0,
    anchor="nw",
    text="JOB:",
    fill="#FFFFFF",
    font=("Montserrat Bold", 20 * -1)
)

canvas.create_text(
    14.0,
    228.0,
    anchor="nw",
    text="TITLE:",
    fill="#FFFFFF",
    font=("Montserrat Bold", 20 * -1)
)

canvas.create_text(
    66.0,
    195.0,
    anchor="nw",
    text=job,
    fill="#FFFFFF",
    font=("Montserrat Regular", 18 * -1)
)

canvas.create_text(
    81.0,
    229.0,
    anchor="nw",
    text=tit,
    fill="#FFFFFF",
    font=("Montserrat Regular", 18 * -1)
)

canvas.create_text(
    14.0,
    161.0,
    anchor="nw",
    text="NAME:",
    fill="#FFFFFF",
    font=("Montserrat Bold", 20 * -1)
)

canvas.create_text(
    88.0,
    162.0,
    anchor="nw",
    text=name,
    fill="#FFFFFF",
    font=("Montserrat Regular", 18 * -1)
)

av_int_based_txt=canvas.create_text(
    324.0,
    610.0,
    anchor="nw",
    text=av_int_based,
    fill="#FFFFFF",
    font=("Montserrat Bold", 24 * -1)
)

image_image_17 = PhotoImage(
    file=relative_to_assets("image_17.png"))
image_17 = canvas.create_image(
    256.0,
    625.0,
    image=image_image_17
)

av_str_based_txt=canvas.create_text(
    324.0,
    555.0,
    anchor="nw",
    text=av_str_based,
    fill="#FFFFFF",
    font=("Montserrat Bold", 24 * -1)
)

image_image_18 = PhotoImage(
    file=relative_to_assets("image_18.png"))
image_18 = canvas.create_image(
    263.0,
    574.0,
    image=image_image_18
)

canvas.create_text(
    10.0,
    563.0,
    anchor="nw",
    text="COINS:",
    fill="#FFFFFF",
    font=("Montserrat Medium", 16 * -1)
)

image_image_19 = PhotoImage(
    file=relative_to_assets("image_19.png"))
image_19 = canvas.create_image(
    91.0,
    604.0,
    image=image_image_19
)

canvas.create_text(
    44.0,
    593.0,
    anchor="nw",
    text=coins,
    fill="#FFFFFF",
    font=("Montserrat Regular", 20 * -1)
)
window.resizable(False, False)
window.mainloop()
